{% extends "base.html" %}
{% block content %}
<h2>Set Inspector</h2>
{% if message %}
  <p class="{{ message_type if message_type else ('success' if success else 'error') }}">{{ message }}</p>
{% endif %}
{% if not selected_set %}
  {{ set_selector | safe }}
{% else %}
  {{ pad_grid | safe }}
  {{ clip_grid | safe }}
  {% if not selected_clip %}
    <form method="get" action="{{ host_prefix }}/set-inspector" style="margin-bottom:1rem;">
      <button type="submit">Choose Another Set</button>
    </form>
  {% else %}
    <form method="post" action="{{ host_prefix }}/set-inspector" style="display:inline;">
      <input type="hidden" name="action" value="select_set">
      <input type="hidden" name="set_path" value="{{ selected_set }}">
      <button type="submit">Choose Another Clip</button>
    </form>
    <form method="get" action="{{ host_prefix }}/set-inspector" style="margin-left:1rem; display:inline;">
      <button type="submit">Choose Another Set</button>
    </form>
    <div style="margin-top:1rem;">
      <label for="envelope_select">Envelope:</label>
      <select id="envelope_select">{{ clip_options | safe }}</select>
    </div>
    <canvas id="clipCanvas" width="400" height="200" style="border:1px solid #ccc;margin-top:1rem;"></canvas>
    <div id="clipData" data-notes='{{ notes | tojson }}' data-envelopes='{{ envelopes | tojson }}' data-region='{{ region }}'></div>
  {% endif %}
{% endif %}
{% endblock %}
{% block scripts %}
<script type="module" src="{{ host_prefix }}/static/set_inspector.js"></script>
{% endblock %}
